<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIP Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 400px;
      margin: 30px auto;
      background-color: #f7f7f7;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
      position: relative;
    }
    .header {
      text-align: center;
      margin-bottom: 20px;
      position: relative;
    }
    .header h2 {
      margin: 0;
    }
    .header img {
      position: absolute;
      top: 0;
      right: 0;
      width: 60px;
      height: auto;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    input[type=range] {
      width: 100%;
    }
    .result {
      background-color: #e6ffe6;
      padding: 10px;
      border-radius: 5px;
      margin-top: 20px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #0056b3;
    }
    .slider-value {
      text-align: right;
      margin-top: -10px;
      margin-bottom: 10px;
      font-weight: bold;
    }
    @media only screen and (max-width: 500px) {
      .container {
        margin: 20px;
      }
      .header img {
        width: 50px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h2>Know your SIP Required</h2>
    <img src="logo.png" alt="Logo">
  </div>
  
  <label>Corpus already accumulated (in ₹ crore):</label>
  <input type="number" id="corpus" step="0.01" placeholder="e.g. 0.5">

  <label>Yearly Step-up rate of SIP (%):</label>
  <input type="number" id="stepup" placeholder="e.g. 10">

  <label>Expected Rate of Return (%):</label>
  <input type="range" min="5" max="20" value="12" id="returnRate">
  <div class="slider-value">Return Rate: <span id="rateValue">12</span>%</div>

  <label>Enter Target Value (in ₹ crore):</label>
  <input type="number" id="target" step="0.01" placeholder="e.g. 1">

  <label>Time to get to your target (in years):</label>
  <input type="number" id="years" placeholder="e.g. 20">

  <button onclick="calculateSIP()">Calculate</button>

  <div class="result" id="result" style="display:none;">
    <p><strong>Monthly SIP Required:</strong> ₹<span id="monthlySip"></span></p>
    <p><strong>Total Investment:</strong> ₹<span id="totalInvestment"></span></p>
    <p><strong>Total Value at end:</strong> ₹<span id="finalValue"></span></p>
    <p id="shortfallMessage"></p>
  </div>
</div>

<script>
  document.getElementById("returnRate").addEventListener("input", function() {
    document.getElementById("rateValue").innerText = this.value;
  });

  function calculateSIP() {
    const corpus = parseFloat(document.getElementById("corpus").value) * 10000000; // crore to rupees
    const stepUpRate = parseFloat(document.getElementById("stepup").value) / 100;
    const expectedReturn = parseFloat(document.getElementById("returnRate").value) / 100;
    const targetValue = parseFloat(document.getElementById("target").value) * 10000000; // crore to rupees
    const years = parseInt(document.getElementById("years").value);
    
    let monthlySIP = 1000;
    let increment = 1000;
    let finalValue = 0;

    // Calculate required SIP using an approximate iterative method
    while (true) {
      finalValue = corpus;
      let currentSIP = monthlySIP;
      for (let year = 1; year <= years; year++) {
        for (let month = 1; month <= 12; month++) {
          finalValue = finalValue * (1 + expectedReturn / 12) + currentSIP;
        }
        currentSIP = currentSIP * (1 + stepUpRate);
      }
      if (finalValue >= targetValue) break;
      monthlySIP += increment;
    }

    // Calculate final investment
    let totalInvestment = 0;
    let currentSIP = monthlySIP;
    for (let year = 1; year <= years; year++) {
      totalInvestment += currentSIP * 12;
      currentSIP *= (1 + stepUpRate);
    }

    const shortfall = targetValue - finalValue;
    const achievedExcess = finalValue - targetValue;

    document.getElementById("monthlySip").innerText = Math.round(monthlySIP);
    document.getElementById("totalInvestment").innerText = Math.round(totalInvestment).toLocaleString();
    document.getElementById("finalValue").innerText = Math.round(finalValue).toLocaleString();
    
    if (shortfall > 0) {
      document.getElementById("shortfallMessage").innerHTML = `<strong>Shortfall from target:</strong> ₹${Math.round(shortfall).toLocaleString()}`;
    } else {
      document.getElementById("shortfallMessage").innerHTML = `<strong>Achieved Target:</strong> Excess ₹${Math.round(achievedExcess).toLocaleString()}`;
    }
    
    document.getElementById("result").style.display = "block";
  }
</script>

</body>
</html>
